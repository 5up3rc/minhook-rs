<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Hook` struct in crate `minhook`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Hook">

    <title>minhook::Hook - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>minhook</a></p><script>window.sidebarCurrent = {name: 'Hook', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>minhook</a>::<wbr><a class='struct' href=''>Hook</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-13078' class='srclink' href='../src/minhook/src/lib.rs.html#104-107' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Hook&lt;T: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; {
    // some fields omitted
}</pre><div class='docblock'><p>A hook that is destroyed when it goes out of scope.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl&lt;T: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; <a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;</code></h3><div class='impl-items'><h4 id='method.create' class='method'><code>unsafe fn <a href='#method.create' class='fnname'>create</a>&lt;D&gt;(target: T, detour: D) -&gt; <a class='type' href='../minhook/type.Result.html' title='minhook::Result'>Result</a>&lt;<a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;&gt; <span class='where'>where T: <a class='trait' href='../minhook/function/trait.HookableWith.html' title='minhook::function::HookableWith'>HookableWith</a>&lt;D&gt;, D: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a></span></code></h4>
<div class='docblock'><p>Create a new hook given a target function and a compatible detour function.</p>

<p>The hook is disabled by default. Even when this function is succesful, there is no
guaranteee that the detour function will actually get called when the target function gets
called. An invocation of the target function might for example get inlined in which case
it is impossible to hook at runtime.</p>

<h1 id='safety' class='section-header'><a href='#safety'>Safety</a></h1>
<p>The given target function type must uniquely match the actual target function. This
means two things: the given target function type has to be correct, but also there
can not be two function pointers with different signatures pointing to the same
code location. This last situation can for example happen when the Rust compiler
or LLVM decide to merge multiple functions with the same code into one.</p>
</div><h4 id='method.create_api' class='method'><code>unsafe fn <a href='#method.create_api' class='fnname'>create_api</a>&lt;M, D&gt;(target_module: M, target_function: <a class='enum' href='../minhook/enum.FunctionId.html' title='minhook::FunctionId'>FunctionId</a>, detour: D) -&gt; <a class='type' href='../minhook/type.Result.html' title='minhook::Result'>Result</a>&lt;<a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;&gt; <span class='where'>where M: <a class='trait' href='https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html' title='core::convert::AsRef'>AsRef</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/std/ffi/os_str/struct.OsStr.html' title='std::ffi::os_str::OsStr'>OsStr</a>&gt;, T: <a class='trait' href='../minhook/function/trait.HookableWith.html' title='minhook::function::HookableWith'>HookableWith</a>&lt;D&gt;, D: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a></span></code></h4>
<div class='docblock'><p>Create a new hook given the name of the module, the name of the function symbol and a
compatible detour function.</p>

<p>The module has to be loaded before this function is called. This function does not
attempt to load the module first. The hook is disabled by default.</p>

<h1 id='safety-1' class='section-header'><a href='#safety-1'>Safety</a></h1>
<p>The target module must remain loaded in memory for the entire duration of the hook.</p>

<p>See <code>create()</code> for more safety requirements.</p>
</div><h4 id='method.trampoline' class='method'><code>fn <a href='#method.trampoline' class='fnname'>trampoline</a>(&amp;self) -&gt; T::Unsafe</code></h4>
<div class='docblock'><p>Returns an unsafe reference to the trampoline function.</p>

<p>Calling the returned function is always unsafe as it will point to invalid memory after the
hook is destroyed.</p>
</div><h4 id='method.enable' class='method'><code>fn <a href='#method.enable' class='fnname'>enable</a>(&amp;self) -&gt; <a class='type' href='../minhook/type.Result.html' title='minhook::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Enables this hook.</p>

<p>Consider using a <code>HookQueue</code> if you want to enable/disable a large amount of hooks at once.</p>
</div><h4 id='method.disable' class='method'><code>fn <a href='#method.disable' class='fnname'>disable</a>(&amp;self) -&gt; <a class='type' href='../minhook/type.Result.html' title='minhook::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Disables this hook.</p>

<p>Consider using a <code>HookQueue</code> if you want to enable/disable a large amount of hooks at once.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><code>impl&lt;T: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html' title='core::ops::Drop'>Drop</a> for <a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;</code></h3><div class='impl-items'><h4 id='method.drop' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html#method.drop' class='fnname'>drop</a>(&amp;mut self)</code></h4>
</div><h3 class='impl'><code>impl&lt;T: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html' title='core::marker::Sync'>Sync</a> for <a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;</code></h3><div class='impl-items'></div><h3 class='impl'><code>impl&lt;T: <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> for <a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;</code></h3><div class='impl-items'></div><h3 id='derived_implementations'>Derived Implementations </h3><h3 class='impl'><code>impl&lt;T: <a class='trait' href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a> + <a class='trait' href='../minhook/function/trait.Function.html' title='minhook::function::Function'>Function</a>&gt; <a class='trait' href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html' title='core::fmt::Debug'>Debug</a> for <a class='struct' href='../minhook/struct.Hook.html' title='minhook::Hook'>Hook</a>&lt;T&gt;</code></h3><div class='impl-items'><h4 id='method.fmt' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#method.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class='struct' href='https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html' title='core::fmt::Formatter'>Formatter</a>) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/core/fmt/type.Result.html' title='core::fmt::Result'>Result</a></code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "minhook";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>